{"map":"{\"version\":3,\"sources\":[\"D:/projects/object-detection/src/index.js\"],\"names\":[\"tf\",\"require\",\"headers\",\"Content-Type\",\"names\",\"modelWeight\",\"modelHeight\",\"App\",\"props\",\"_this\",\"Object\",\"D_projects_object_detection_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__\",\"this\",\"D_projects_object_detection_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__\",\"D_projects_object_detection_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__\",\"call\",\"videoRef\",\"React\",\"createRef\",\"canvasRef\",\"state\",\"model\",\"preview\",\"userid\",\"proctorid\",\"examid\",\"predictions\",\"pushToDynamodb\",\"predict\",\"test\",\"id\",\"concat\",\"eid\",\"cid\",\"ts\",\"timestamp\",\"pid\",\"JSON\",\"stringify\",\"axios\",\"post\",\"then\",\"response\",\"catch\",\"err\",\"checkwithVideo\",\"videointerval\",\"undefined\",\"setInterval\",\"onImageChange\",\"cropToCanvas\",\"image\",\"canvas\",\"ctx\",\"naturalWidth\",\"videoWidth\",\"naturalHeight\",\"videoHeight\",\"clearRect\",\"width\",\"height\",\"fillStyle\",\"fillRect\",\"ratio\",\"Math\",\"min\",\"newWidth\",\"round\",\"newHeight\",\"drawImage\",\"current\",\"getContext\",\"input\",\"tidy\",\"resizeBilinear\",\"browser\",\"fromPixels\",\"div\",\"expandDims\",\"executeAsync\",\"res\",\"detectiondata\",\"detection\",\"font\",\"textBaseline\",\"i\",\"_res\",\"D_projects_object_detection_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__\",\"boxes\",\"scores\",\"classes\",\"valid_detections\",\"boxes_data\",\"dataSync\",\"scores_data\",\"classes_data\",\"valid_detections_data\",\"dispose\",\"_boxes_data$slice\",\"slice\",\"_boxes_data$slice2\",\"x1\",\"y1\",\"x2\",\"y2\",\"klass\",\"score\",\"toFixed\",\"strokeStyle\",\"lineWidth\",\"strokeRect\",\"textWidth\",\"measureText\",\"textHeight\",\"parseInt\",\"_boxes_data$slice3\",\"_boxes_data$slice4\",\"push\",\"class\",\"fillText\",\"Date\",\"now\",\"length\",\"handleSubmit\",\"bind\",\"D_projects_object_detection_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__\",\"handleuserChange\",\"handleExamChange\",\"handleproctorChange\",\"_this2\",\"navigator\",\"mediaDevices\",\"getUserMedia\",\"webCamPromise\",\"audio\",\"video\",\"facingMode\",\"stream\",\"window\",\"srcObject\",\"Promise\",\"resolve\",\"reject\",\"onloadedmetadata\",\"modelPromise\",\"loadGraphModel\",\"setState\",\"console\",\"log\",\"all\",\"values\",\"error\",\"event\",\"target\",\"value\",\"preventDefault\",\"startcamera\",\"react__WEBPACK_IMPORTED_MODULE_7___default\",\"a\",\"createElement\",\"onSubmit\",\"for\",\"type\",\"placeholder\",\"onChange\",\"autoPlay\",\"style\",\"visibility\",\"muted\",\"ref\",\"className\",\"Component\",\"rootElement\",\"document\",\"getElementById\",\"ReactDOM\",\"render\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React from \\\"react\\\";\\nimport ReactDOM from \\\"react-dom\\\";\\nimport axios from 'axios';\\n// import * as mdb from 'mdb-ui-kit'; // lib\\n// import { Input } from 'mdb-ui-kit'; // module\\n\\n// import MagicDropzone from \\\"react-magic-dropzone\\\";\\nimport \\\"./styles.css\\\";\\nconst tf = require('@tensorflow/tfjs');\\nconst weights = '/web_model_old/model.json';\\nconst headers = {\\n  'Content-Type': 'application/json'\\n}\\nconst names = ['Calculator', 'Cup', 'Ear_Piece', 'GoogleGlass', 'Head_Phone', 'Laptop',\\n  'MobilePhone', 'Notebook', 'Pen', 'Smart_watch', 'Spec', 'SunGlass'\\n]\\nconst [modelWeight, modelHeight] = [640, 640];\\nclass App extends React.Component {\\n  videoRef = React.createRef();\\n  canvasRef = React.createRef();\\n  state = {\\n    model: null,\\n    preview: \\\"\\\",\\n    userid: \\\"\\\",\\n    proctorid: \\\"\\\",\\n    examid: \\\"\\\",\\n    predictions: []\\n  };\\n  componentDidMount() {\\n  }\\n  constructor(props) {\\n    super(props)\\n    this.state = {\\n      model: null,\\n      preview: \\\"\\\",\\n      userid: \\\"\\\",\\n      proctorid: \\\"\\\",\\n      examid: \\\"\\\",\\n      predictions: []\\n    };\\n    this.handleSubmit = this.handleSubmit.bind(this)\\n    this.handleuserChange = this.handleuserChange.bind(this)\\n    this.handleExamChange = this.handleExamChange.bind(this)\\n    this.handleproctorChange = this.handleproctorChange.bind(this)\\n  }\\n\\n  startcamera() {\\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\\n      const webCamPromise = navigator.mediaDevices\\n        .getUserMedia({\\n          audio: false,\\n          video: {\\n            facingMode: \\\"user\\\"\\n          }\\n        })\\n        .then(stream => {\\n          window.stream = stream;\\n          this.videoRef.current.srcObject = stream;\\n          return new Promise((resolve, reject) => {\\n            this.videoRef.current.onloadedmetadata = () => {\\n              resolve();\\n            };\\n          });\\n        });\\n\\n      const modelPromise = tf.loadGraphModel(weights).then(model => {\\n        this.setState({\\n          model: model\\n        });\\n        console.log(\\\"model ready......\\\", model)\\n        return this.state.model;\\n      });\\n      Promise.all([modelPromise, webCamPromise])\\n        .then(values => {\\n          // this.detectFrame(this.videoRef.current, values[0]);\\n          this.checkwithVideo()\\n        })\\n        .catch(error => {\\n          console.error(error);\\n        });\\n    }\\n  }\\n  pushToDynamodb = (predict) => {\\n    let test = {\\n      \\\"id\\\": `${this.state.userid}_${this.state.examid}`,\\n      \\\"eid\\\": this.state.examid,\\n      \\\"cid\\\": this.state.userid,\\n      \\\"ts\\\": predict.timestamp,\\n      \\\"pid\\\": this.state.proctorid,\\n      \\\"predict\\\": JSON.stringify(predict)\\n    }\\n    axios.post('https://sh3x2x9en3.execute-api.us-east-1.amazonaws.com/test/', test, { headers: headers })\\n      .then(response => {\\n        //console.log(response)\\n      }).catch(err => {\\n        //console.log(err)\\n      })\\n  }\\n\\n  checkwithVideo = () => {\\n    let videointerval;\\n    if (videointerval === undefined) {\\n      videointerval = setInterval(() => {\\n        this.onImageChange()\\n      }, 100)\\n    }\\n  };\\n\\n  cropToCanvas = (image, canvas, ctx) => {\\n    const naturalWidth = image.videoWidth;\\n    const naturalHeight = image.videoHeight;\\n    // canvas.width = image.width;\\n    // canvas.height = image.height;\\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\\n    ctx.fillStyle = \\\"#000000\\\";\\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\\n    const ratio = Math.min(canvas.width / image.videoWidth, canvas.height / image.videoHeight);\\n    const newWidth = Math.round(naturalWidth * ratio);\\n    const newHeight = Math.round(naturalHeight * ratio);\\n    ctx.drawImage(this.videoRef.current, 0, 0, naturalWidth, naturalHeight, (canvas.width - newWidth) / 2, (canvas.height - newHeight) / 2, newWidth, newHeight,);\\n  };\\n\\n  onImageChange = () => {\\n    const canvas = this.canvasRef.current;\\n    const ctx = canvas.getContext(\\\"2d\\\");\\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\\n    // this.cropToCanvas(this.videoRef.current, canvas, ctx);\\n    const input = tf.tidy(() => {\\n      return tf.image.resizeBilinear(tf.browser.fromPixels(this.videoRef.current), [modelWeight, modelHeight])\\n        .div(255.0).expandDims(0);\\n    });\\n    this.state.model.executeAsync(input).then(res => {\\n      let detectiondata = {\\n        detection: [],\\n        timestamp: \\\"\\\"\\n      };\\n      // Font options.\\n      const font = \\\"16px sans-serif\\\";\\n      ctx.font = font;\\n      ctx.textBaseline = \\\"top\\\";\\n      const [boxes, scores, classes, valid_detections] = res;\\n      const boxes_data = boxes.dataSync();\\n      const scores_data = scores.dataSync();\\n      const classes_data = classes.dataSync();\\n      const valid_detections_data = valid_detections.dataSync()[0];\\n      tf.dispose(res)\\n      tf.dispose(input)\\n\\n\\n\\n      var i;\\n      for (i = 0; i < valid_detections_data; ++i) {\\n        let [x1, y1, x2, y2] = boxes_data.slice(i * 4, (i + 1) * 4);\\n        x1 *= canvas.width;\\n        x2 *= canvas.width;\\n        y1 *= canvas.height;\\n        y2 *= canvas.height;\\n        const width = x2 - x1;\\n        const height = y2 - y1;\\n        const klass = names[classes_data[i]];\\n        const score = scores_data[i].toFixed(2);\\n        // Draw the bounding box.\\n        ctx.strokeStyle = \\\"#00FFFF\\\";\\n        ctx.lineWidth = 4;\\n        ctx.strokeRect(x1, y1, width, height);\\n        //console.log('x1',x1)\\n        // Draw the label background.\\n        ctx.fillStyle = \\\"#00FFFF\\\";\\n        const textWidth = ctx.measureText(klass + \\\":\\\" + score).width;\\n        const textHeight = parseInt(font, 10); // base 10\\n        ctx.fillRect(x1, y1, textWidth + 4, textHeight + 4);\\n      }\\n      for (i = 0; i < valid_detections_data; ++i) {\\n        let [x1, y1, ,] = boxes_data.slice(i * 4, (i + 1) * 4);\\n        x1 *= canvas.width;\\n        y1 *= canvas.height;\\n        const klass = names[classes_data[i]];\\n        const score = scores_data[i].toFixed(2);\\n        //console.log('klass ',klass, ', score', score)\\n        detectiondata.detection.push({ \\\"class\\\": klass, \\\"score\\\": score })\\n        // Draw the text last to ensure it's on top.\\n        ctx.fillStyle = \\\"#000000\\\";\\n        ctx.fillText(klass + \\\":\\\" + score, x1, y1);\\n      }\\n      detectiondata.timestamp = Date.now()\\n      if (detectiondata.detection && detectiondata.detection.length > 0) {\\n        this.pushToDynamodb(detectiondata)\\n      }\\n      // this.onImageChange()\\n      // console.log(score)\\n    });\\n  };\\n\\n  handleuserChange(event) {\\n    this.setState({\\n      userid: event.target.value\\n    })\\n  }\\n\\n  handleExamChange(event) {\\n    this.setState({\\n      examid: event.target.value\\n    })\\n  }\\n\\n  handleproctorChange(event) {\\n    this.setState({\\n      proctorid: event.target.value\\n    })\\n  }\\n\\n  handleSubmit(event) {\\n    event.preventDefault();\\n    if (this.state.userid !== \\\"\\\" && this.state.examid !== \\\"\\\" && this.state.proctorid !== \\\"\\\") {\\n      this.startcamera()\\n    }\\n  }\\n\\n  render() {\\n    return (\\n\\n      // <div class=\\\"container\\\">\\n      <div class=\\\"row \\\">\\n        <div class=\\\"col-md-2\\\">\\n          <h1 class=\\\"heading\\\">Object Detection </h1>\\n          <form class=\\\"p-2\\\" onSubmit={this.handleSubmit}>\\n            <div class=\\\"form-group mar\\\">\\n              <label for=\\\"candiadteID\\\">Candidate ID:</label>\\n              <input type=\\\"text\\\" class='form-control' id='candiadateId' value={this.state.userid} placeholder=\\\"enter candidateId\\\" onChange={this.handleuserChange} />\\n            </div>\\n            <div class=\\\"form-group  mar\\\">\\n              <label for=\\\"examID\\\">Exam ID:</label>\\n              <input type=\\\"text\\\" class='form-control' value={this.state.examid} onChange={this.handleExamChange} placeholder='enter examID' />\\n            </div>\\n            <div class=\\\"form-group  mar\\\">\\n              <label for=\\\"proctorID\\\">Proctor ID:</label>\\n              <input type=\\\"text\\\" class='form-control' value={this.state.proctorid} onChange={this.handleproctorChange} placeholder='enter proctorID' />\\n            </div>\\n            <input type=\\\"submit\\\" class=\\\"btn button-width text-white\\\" value=\\\"Submit\\\" />\\n\\n          </form>\\n        </div>\\n        <div class=\\\"col-md-5 style1\\\">\\n          <video\\n            class=\\\"test\\\"\\n            // className=\\\"size\\\"\\n            autoPlay\\n            style={{ visibility: '' }}\\n            muted\\n            ref={this.videoRef\\n            }\\n            width=\\\"500\\\"\\n            // height=\\\"840\\\"\\n            height=\\\"800px\\\"\\n          />\\n\\n        </div>\\n        <div class=\\\"col-md-5 canva\\\">\\n          <h1 class=\\\"heading\\\">Proctor View </h1>\\n          <canvas\\n            className=\\\"size\\\"\\n            ref={this.canvasRef}\\n            style={{ visibility: '' }}\\n            width=\\\"500\\\"\\n            height=\\\"500\\\"\\n          />\\n        </div>\\n      </div>\\n      // </div>\\n    );\\n  }\\n}\\nconst rootElement = document.getElementById(\\\"root\\\");\\nReactDOM.render(<App />, rootElement);\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{263:function(e,t,a){e.exports=a(264)},264:function(e,t,a){\"use strict\";a.r(t);var n=a(5),i=a(6),o=a(18),c=a(12),r=a(13),s=a(17),d=a(37),l=a(40),h=a.n(l),u=a(240),m=a.n(u),v=a(241),f=a.n(v),p=(a(286),a(309)),g={\"Content-Type\":\"application/json\"},b=[\"Calculator\",\"Cup\",\"Ear_Piece\",\"GoogleGlass\",\"Head_Phone\",\"Laptop\",\"MobilePhone\",\"Notebook\",\"Pen\",\"Smart_watch\",\"Spec\",\"SunGlass\"],w=640,x=640,y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).videoRef=h.a.createRef(),a.canvasRef=h.a.createRef(),a.state={model:null,preview:\"\",userid:\"\",proctorid:\"\",examid:\"\",predictions:[]},a.pushToDynamodb=function(e){var t={id:\"\".concat(a.state.userid,\"_\").concat(a.state.examid),eid:a.state.examid,cid:a.state.userid,ts:e.timestamp,pid:a.state.proctorid,predict:JSON.stringify(e)};f.a.post(\"https://sh3x2x9en3.execute-api.us-east-1.amazonaws.com/test/\",t,{headers:g}).then(function(e){}).catch(function(e){})},a.checkwithVideo=function(){var e;void 0===e&&(e=setInterval(function(){a.onImageChange()},100))},a.cropToCanvas=function(e,t,n){var i=e.videoWidth,o=e.videoHeight;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.fillStyle=\"#000000\",n.fillRect(0,0,t.width,t.height);var c=Math.min(t.width/e.videoWidth,t.height/e.videoHeight),r=Math.round(i*c),s=Math.round(o*c);n.drawImage(a.videoRef.current,0,0,i,o,(t.width-r)/2,(t.height-s)/2,r,s)},a.onImageChange=function(){var e=a.canvasRef.current,t=e.getContext(\"2d\");t.clearRect(0,0,t.canvas.width,t.canvas.height);var i=p.tidy(function(){return p.image.resizeBilinear(p.browser.fromPixels(a.videoRef.current),[w,x]).div(255).expandDims(0)});a.state.model.executeAsync(i).then(function(o){var c={detection:[],timestamp:\"\"},r=\"16px sans-serif\";t.font=r,t.textBaseline=\"top\";var s,d=Object(n.a)(o,4),l=d[0],h=d[1],u=d[2],m=d[3],v=l.dataSync(),f=h.dataSync(),g=u.dataSync(),w=m.dataSync()[0];for(p.dispose(o),p.dispose(i),s=0;s<w;++s){var x=v.slice(4*s,4*(s+1)),y=Object(n.a)(x,4),E=y[0],C=y[1],S=y[2],j=y[3];E*=e.width,S*=e.width,C*=e.height;var O=S-E,D=(j*=e.height)-C,I=b[g[s]],R=f[s].toFixed(2);t.strokeStyle=\"#00FFFF\",t.lineWidth=4,t.strokeRect(E,C,O,D),t.fillStyle=\"#00FFFF\";var k=t.measureText(I+\":\"+R).width,F=parseInt(r,10);t.fillRect(E,C,k+4,F+4)}for(s=0;s<w;++s){var P=v.slice(4*s,4*(s+1)),M=Object(n.a)(P,3),T=M[0],_=M[1];T*=e.width,_*=e.height;var G=b[g[s]],z=f[s].toFixed(2);c.detection.push({class:G,score:z}),t.fillStyle=\"#000000\",t.fillText(G+\":\"+z,T,_)}c.timestamp=Date.now(),c.detection&&c.detection.length>0&&a.pushToDynamodb(c)})},a.state={model:null,preview:\"\",userid:\"\",proctorid:\"\",examid:\"\",predictions:[]},a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handleuserChange=a.handleuserChange.bind(Object(d.a)(Object(d.a)(a))),a.handleExamChange=a.handleExamChange.bind(Object(d.a)(Object(d.a)(a))),a.handleproctorChange=a.handleproctorChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){}}]),Object(r.a)(t,[{key:\"startcamera\",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var t=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:\"user\"}}).then(function(t){return window.stream=t,e.videoRef.current.srcObject=t,new Promise(function(t,a){e.videoRef.current.onloadedmetadata=function(){t()}})}),a=p.loadGraphModel(\"/web_model_old/model.json\").then(function(t){return e.setState({model:t}),console.log(\"model ready......\",t),e.state.model});Promise.all([a,t]).then(function(t){e.checkwithVideo()}).catch(function(e){console.error(e)})}}},{key:\"handleuserChange\",value:function(e){this.setState({userid:e.target.value})}},{key:\"handleExamChange\",value:function(e){this.setState({examid:e.target.value})}},{key:\"handleproctorChange\",value:function(e){this.setState({proctorid:e.target.value})}},{key:\"handleSubmit\",value:function(e){e.preventDefault(),\"\"!==this.state.userid&&\"\"!==this.state.examid&&\"\"!==this.state.proctorid&&this.startcamera()}},{key:\"render\",value:function(){return h.a.createElement(\"div\",{class:\"row \"},h.a.createElement(\"div\",{class:\"col-md-2\"},h.a.createElement(\"h1\",{class:\"heading\"},\"Object Detection \"),h.a.createElement(\"form\",{class:\"p-2\",onSubmit:this.handleSubmit},h.a.createElement(\"div\",{class:\"form-group mar\"},h.a.createElement(\"label\",{for:\"candiadteID\"},\"Candidate ID:\"),h.a.createElement(\"input\",{type:\"text\",class:\"form-control\",id:\"candiadateId\",value:this.state.userid,placeholder:\"enter candidateId\",onChange:this.handleuserChange})),h.a.createElement(\"div\",{class:\"form-group  mar\"},h.a.createElement(\"label\",{for:\"examID\"},\"Exam ID:\"),h.a.createElement(\"input\",{type:\"text\",class:\"form-control\",value:this.state.examid,onChange:this.handleExamChange,placeholder:\"enter examID\"})),h.a.createElement(\"div\",{class:\"form-group  mar\"},h.a.createElement(\"label\",{for:\"proctorID\"},\"Proctor ID:\"),h.a.createElement(\"input\",{type:\"text\",class:\"form-control\",value:this.state.proctorid,onChange:this.handleproctorChange,placeholder:\"enter proctorID\"})),h.a.createElement(\"input\",{type:\"submit\",class:\"btn button-width text-white\",value:\"Submit\"}))),h.a.createElement(\"div\",{class:\"col-md-5 style1\"},h.a.createElement(\"video\",{class:\"test\",autoPlay:!0,style:{visibility:\"\"},muted:!0,ref:this.videoRef,width:\"500\",height:\"800px\"})),h.a.createElement(\"div\",{class:\"col-md-5 canva\"},h.a.createElement(\"h1\",{class:\"heading\"},\"Proctor View \"),h.a.createElement(\"canvas\",{className:\"size\",ref:this.canvasRef,style:{visibility:\"\"},width:\"500\",height:\"500\"})))}}]),t}(h.a.Component),E=document.getElementById(\"root\");m.a.render(h.a.createElement(y,null),E)},286:function(e,t,a){},294:function(e,t){},295:function(e,t){},303:function(e,t){},306:function(e,t){},307:function(e,t){},308:function(e,t){}},[[263,2,1]]]);","extractedComments":[]}